<h1> Your Package Details</h1>


<h2> <%= @package.title %></h2>


<div> 
 
 Status: 

  <% if @package.driver_id.nil? %>
    Ready for Pickup 

     <% if @current_user.type == "Driver" %>
      <br/> 
        <form method="post" action="/packages/<%=@package.id %>">
          <input type="hidden" name="event" value="assign">
          <input type="submit" value="Accept this Delivery">
        </form>
    <% end %> 

  <% elsif @package.driver_id && @package.pick_up_time.nil? %>
    Accepted at <%= @package.assigned_time.strftime('%c') %>
    <!-- button to cancel set driver_id, assigned_time to nil -->
    <!-- button to pickup set pick_up_time -->

    <% if @current_user.type == "Driver" %>
      <br/> 
        <form method="post" action="/packages/<%=@package.id %>">
          <input type="hidden" name="event" value="cancel">
          <input type="submit" value="Cancel this Delivery">
        </form>
    <% end %> 

    <% if @current_user.type == "Driver" %>
      <br/> 
        <form method="post" action="/packages/<%=@package.id %>">
          <input type="hidden" name="event" value="picked_up">
          <input type="submit" value="Picked Up">
        </form>
    <% end %> 

  <% elsif  @package.pick_up_time && @package.delivery_time.nil? %>
    Picked Up at <%= @package.pick_up_time %>
   <!-- button to deliver set delivered_time -->

     <% if @current_user.type == "Driver" %>
      <br/> 
        <form method="post" action="/packages/<%=@package.id %>">
          <input type="hidden" name="event" value="delivered">
          <input type="submit" value="Delivered">
        </form>
    <% end %> 

   <% elsif  @package.delivery_time %> 
    Delivered at <%= @package.delivery_time %>
  <% end %> 


   

  <br/> 
  Recipient: <%= @package.recipient %>
  <br/> 
  Origin: <%= @package.origin %>
  <br/> 
  Destination: <%= @package.destination %>
  <br/>
  Dimensions (L x W x H): <%= @package.length %> x <%= @package.width %> x <%= @package.height %> 
  <br/>
  Notes: <%= @package.notes %>

</div>

<div> 

  <% if @current_user.type == "Customer" %>

    <a href='/packages/<%=@package.id %>/edit'> Edit Your Package Details </a>
    <br/> 

    <% if @package.driver_id.nil? %> 
      Your package has not been accepted yet. You may still cancel your delivery. 
      <br/> 
      <form method="post" action="/packages/<%=@package.id %>">
        <input type="hidden" name="_method" value="delete"> 
        <input type="submit" value="Delete Package">
      </form>
    <% end %> 

  <br/>
  <div> 
    Your Driver's Information
    
  </div>

  <% end %>


</div>
